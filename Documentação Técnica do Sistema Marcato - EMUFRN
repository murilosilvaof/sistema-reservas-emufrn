# üìò Sistema Marcato - Escola de M√∫sica da UFRN

**Marcato** √© um sistema web desenvolvido para gerenciar reservas de salas e audit√≥rios da Escola de M√∫sica da UFRN, com confirma√ß√£o por e-mail e integra√ß√£o ao Google Calendar institucional.

---

## ‚ú® Vis√£o Geral

Este sistema permite que alunos, professores e t√©cnicos agendem espa√ßos da escola de forma pr√°tica, com confirma√ß√£o online e sincroniza√ß√£o autom√°tica com o Google Agenda da produ√ß√£o (`producao@musica.ufrn.br`).

Desenvolvido com:
- PHP (com Composer)
- JavaScript
- MySQL
- PHPMailer
- Google API Client

---

## üìÅ Estrutura de Arquivos

| Arquivo/Pasta          | Fun√ß√£o                                                                 |
|------------------------|------------------------------------------------------------------------|
| `index.html`           | Tela inicial com calend√°rio e sele√ß√£o de espa√ßos                       |
| `formulario.html`      | Formul√°rio com campos de identifica√ß√£o e reserva                       |
| `processa_reserva.php` | Insere a reserva no banco e envia e-mail de confirma√ß√£o                |
| `resposta.php`         | Confirma ou recusa a reserva e atualiza banco + Google Calendar        |
| `send_email.php`       | Teste alternativo para envio de e-mail (pode ser opcional)             |
| `get_token.php`        | Faz autentica√ß√£o OAuth e gera o token do Google                        |
| `credenciais.json`     | Credenciais da Google API (N√ÉO PUBLICAR no reposit√≥rio)                |
| `token.json`           | Token OAuth2 salvo ap√≥s autentica√ß√£o                                   |
| `vendor/`              | Bibliotecas externas instaladas pelo Composer                          |
| `composer.json`        | Lista de depend√™ncias do projeto                                       |

---

## üõ† Banco de Dados

### Tabela: `reservas_espacos`

| Campo        | Tipo       | Descri√ß√£o                           |
|--------------|------------|--------------------------------------|
| id           | INT (PK)   | Identificador da reserva             |
| nome         | VARCHAR    | Nome do solicitante                  |
| instrumento  | VARCHAR    | Tipo de instrumento usado            |
| matricula    | VARCHAR    | Matr√≠cula do aluno                   |
| email        | VARCHAR    | E-mail do solicitante                |
| sala         | VARCHAR    | Sala ou audit√≥rio reservado          |
| tipo_evento  | VARCHAR    | Tipo (ensaio, recital, apresenta√ß√£o) |
| perfil       | VARCHAR    | Perfil: aluno, professor, t√©cnico    |
| dia          | DATE       | Data da reserva                      |
| horario      | TIME       | Hor√°rio da reserva                   |
| obs          | TEXT       | Observa√ß√µes / nome do evento         |
| status       | VARCHAR    | Status: `pendente`, `confirmada`, `recusada` |

---

## üîê Requisitos no Servidor

- PHP 7.4 ou superior
- Suporte a `cURL` e `openssl`
- MySQL
- Permiss√£o de escrita em `token.json`
- Envio de e-mails via SMTP (porta 587)
- Acesso ao Composer (ou upload pr√©vio da pasta `vendor/`)

---

## üß™ Como Testar

1. Acesse `index.html` no navegador
2. Escolha espa√ßo, data e hor√°rio
3. Preencha o formul√°rio com os dados da reserva
4. Um e-mail ser√° enviado ao respons√°vel com dois bot√µes: `Confirmar` e `Recusar`
5. Ao clicar em confirmar, o sistema:
   - Atualiza o banco (`status = confirmada`)
   - Cria o evento na agenda Google institucional

---

## üõ° Seguran√ßa

- **`credenciais.json` e `token.json`** n√£o devem ser versionados no GitHub.
- Ideal armazen√°-los em diret√≥rios protegidos no servidor.

---

## üõ† Manuten√ß√£o

- Em caso de expira√ß√£o do token, reautenticar em `get_token.php`
- Banco pode ser exportado pelo phpMyAdmin
- Atualiza√ß√µes visuais s√£o feitas diretamente nos arquivos HTML e CSS

---

## üë§ Autor

- **Nome:** Murilo Francisco da Silva  
- **E-mail:** murilodevweb@gmail.com  
- **Projeto:** Sistema Marcato - EMUFRN  
- **Vers√£o:** 1.0  
- **Hospedagem atual:** https://ismcursos.com/marcato (local,atualizar para o servidor oficial)

---

## üìé Licen√ßa

Uso institucional - Escola de M√∫sica da UFRN.  
N√£o utilizar ou distribuir sem autoriza√ß√£o da coordena√ß√£o.

